esphome:
  name: wireless-bridge
  friendly_name: "Wireless Bridge"

  on_boot:
    - priority: 600 # Before sensors are initialized
      then:
        - light.turn_on:
            id: led_onboard
            brightness: 50%
            red: 100%
            green: 0%
            blue: 0%
    - priority: 300 # Before wifi is initialized
      then:
        - light.turn_on:
            id: led_onboard
            brightness: 50%
            red: 100%
            green: 100%
            blue: 0%
            effect: pulse
    - priority: 100 # After wifi is initialized
      then:
        - light.turn_on:
            id: led_onboard
            brightness: 50%
            red: 0%
            green: 100%
            blue: 0%
            effect: none

esp32:
  board: esp32-c6-devkitc-1
  framework:
    type: esp-idf

# Enable logging
logger:

# Enable Home Assistant API
api:
  encryption:
    key: "maGHGmDbaVqHpBCybUveF8ukgwsukY9RzC5LEHrFCIo="

ota:
  - platform: esphome
    password: "91d788471b8905f218e0aa137e45ad7e"

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

  # Enable fallback hotspot (captive portal) in case wifi connection fails
  ap:
    ssid: "Wireless-Bridge Fallback Hotspot"
    password: "Xzv4s3zzXLva"

captive_portal:

light:
  - platform: esp32_rmt_led_strip
    id: led_onboard
    rgb_order: GRB
    pin: GPIO8
    num_leds: 1
    chipset: ws2812
    name: "Onboard LED"
    default_transition_length: 0s
    effects:
      - pulse:
          transition_length: 550ms
          update_interval: 550ms
